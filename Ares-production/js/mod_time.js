// Mod: Time for Xin Calendar 2 (In-Page/Popup-Window)
// Copyright 2005  Xin Yang    All Rights Reserved.

var xc_bw=new Array();function xc_aa(jg){xc_bw[xc_bw.length]=jg};function xc_ci(date){var gs=xcDateFormat.search(/hr/i);var he=xcDateFormat.search(/mi/i);var as=xcDateFormat.search(/am/i);var hr=gs<0?"":date.substring(gs,gs+2);var mi=he<0?"":date.substring(he,he+2);var am=as<0?"":date.substring(as,as+2);return new Array(hr,mi,am)};function xc_ev(date,hr,mi,am){var gs=xcDateFormat.search(/hr/i);var he=xcDateFormat.search(/mi/i);var as=xcDateFormat.search(/am/i);if(gs>=0){date=date.substring(0,gs)+hr+date.substring(gs+2)};if(he>=0){date=date.substring(0,he)+mi+date.substring(he+2)};if(as>=0){date=date.substring(0,as)+am+date.substring(as+2)};return date};function xc_ez(jg,iq,fe,gz,bu){if(typeof(jg.gv)=="undefined"){jg.gv=String((new Date()).getTime());xc_aa(jg)};var fq="xc_"+jg.gv;var gp=["","",""],gm=["hr","mi","am"],go=[xcHours,xcMinutes,xcAMPM],gn="";var du=xc_bx(bu),date=du.gc()||du.fe;if(checkDate(date)==0){gp=xc_ci(date)};gn=xc_fn+xc_fh;for(var i=0;i<gm.length;i++){if(xcDateFormat.toLowerCase().indexOf(gm[i])!=-1){gn+="<TD><SELECT ID='"+fq+"_"+gm[i]+"' CLASS='"+xcCSSTimeList+"' ONCHANGE='xc_eq("+bu+")'>";for(var j=0;j<go[i].length;j++){gn+="<OPTION";if(go[i][j]==gp[i]){gn+=" SELECTED"};gn+=">"+go[i][j]+"</OPTION>"};gn+="</SELECT></TD>"}};gn+=xc_fg+xc_fm;return gn};function xc_eq(gw){var du=xc_bx(gw);du.bf();var bo=du.bi(du.ao(du.gc()||du.fe));du.jx(bo);du.ar(bo);du.gz=bo};function xc_ad(){xcCSSFootOther[xcCSSFootOther.length]=xcCSSTimeBlock;xcFootButtons[xcFootButtons.length]=xc_ez;xcFootButtonSwitch[xcFootButtonSwitch.length]=xcTimeBlockOrder;xcFootButtonLinks[xcFootButtonLinks.length]=null};xc_ad();function xc_al(date){var gu=hg=au="";var fh=xcCore==2?this.kb.document:document;if(/hr/i.test(xcDateFormat)){var gt=fh.getElementById("xc_"+this.jg.gv+"_hr");gu=gt.options[gt.selectedIndex].text};if(/mi/i.test(xcDateFormat)){var hf=fh.getElementById("xc_"+this.jg.gv+"_mi");hg=hf.options[hf.selectedIndex].text};if(/am/i.test(xcDateFormat)){var at=fh.getElementById("xc_"+this.jg.gv+"_am");au=at.options[at.selectedIndex].text};return beforeSetDateValue(this.iq,this.jg,xc_ev(date,gu,hg,au))};function compareDates(dz,ea){var bx=xc_ce();var d1=getDateNumbers(bx.test(dz)?dz:getCurrentDate()).join("");var d2=getDateNumbers(bx.test(ea)?ea:getCurrentDate()).join("");var t1=xc_ci(dz);var t2=xc_ci(ea);d1+=t1[0]==""?"00":t1[2]==xcAMPM[1]?xc_cd(parseInt(t1[0],10)+12):t1[0];d2+=t2[0]==""?"00":t2[2]==xcAMPM[1]?xc_cd(parseInt(t2[0],10)+12):t2[0];d1+=t1[1]==""?"00":t1[1];d2+=t2[1]==""?"00":t2[1];return(d1==d2?0:d1>d2?1:-1)};
